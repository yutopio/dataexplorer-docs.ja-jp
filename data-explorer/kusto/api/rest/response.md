---
title: クエリ/管理 HTTP 応答-Azure データエクスプローラー |Microsoft Docs
description: この記事では、Azure データエクスプローラーでのクエリ/管理 HTTP 応答について説明します。
services: data-explorer
author: orspod
ms.author: orspodek
ms.reviewer: rkarlin
ms.service: data-explorer
ms.topic: reference
ms.date: 11/05/2018
ms.openlocfilehash: f926daa248a74b7b61ea4867d3a54f857444823e
ms.sourcegitcommit: 39b04c97e9ff43052cdeb7be7422072d2b21725e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/12/2020
ms.locfileid: "83226025"
---
# <a name="querymanagement-http-response"></a>クエリ/管理の HTTP 応答

## <a name="response-status"></a>応答の状態

Http 応答ステータス行は、HTTP 標準の応答コードに従います。
たとえば、コード200は成功を示しています。 

次のステータスコードは現在使用されていますが、有効な HTTP コードが返される場合もあります。

|コード|コード        |説明                                    |
|----|---------------|-----------------------------------------------|
|100 |Continue       |クライアントは引き続き要求を送信できます。       |
|200 |[OK]             |要求の処理が正常に開始されました。       |
|400 |BadRequest     |要求の形式が正しくありません (完全に)。|
|401 |権限がありません   |最初にクライアントを認証する必要があります。            |
|403 |Forbidden      |クライアント要求が拒否されました。                      |
|404 |NotFound       |要求は、存在しないエンティティを参照します。      |
|413 |PayloadTooLarge|要求ペイロードが制限を超えました。               |
|429 |TooManyRequests|制限により、要求が拒否されました。 |
|504 |タイムアウト        |要求がタイムアウトしました。                         |
|520 |ServiceError   |サービスが要求の処理中にエラーを検出しました。|

> [!NOTE]
> 200状態コードは、要求処理が正常に開始され、正常に完了していないことを示しています。
> 200状態コードが返された後に要求の処理中に発生したエラーは "部分的なクエリエラー" と呼ばれ、検出されると、クライアントに通知するための特別なインジケーターが応答ストリームに挿入されます。

## <a name="response-headers"></a>応答ヘッダー

次のカスタムヘッダーが返されます。

|カスタムヘッダー           |説明                                                                                               |
|------------------------|----------------------------------------------------------------------------------------------------------|
|`x-ms-client-request-id`|同じ名前の要求ヘッダーまたは一意の識別子の中で送信された一意の要求 id。     |
|`x-ms-activity-id`      |要求のグローバル一意関連付け識別子。 サービスによって作成されます。                    |

## <a name="response-body"></a>応答本文

ステータスコードが200の場合、応答本文は、クエリまたは制御コマンドの結果を四角形テーブルのシーケンスとしてエンコードする JSON ドキュメントです。
詳細については、以下をご覧ください。

> [!NOTE]
> テーブルのシーケンスは、SDK によって反映されます。 たとえば、.NET Framework Kusto. Data ライブラリを使用すると、テーブルのシーケンスが `System.Data.IDataReader` SDK によって返されるオブジェクトの結果になります。

ステータスコードが4xx または5xx エラー (401 以外) を示している場合、応答本文はエラーの詳細をエンコードする JSON ドキュメントです。
詳細については、「 [Microsoft REST API のガイドライン](https://github.com/microsoft/api-guidelines)」を参照してください。

> [!NOTE]
> `Accept`ヘッダーが要求に含まれていない場合、エラーの応答本文は必ずしも JSON ドキュメントであるとは限りません。

## <a name="json-encoding-of-a-sequence-of-tables"></a>テーブルのシーケンスの JSON エンコード

テーブルのシーケンスの JSON エンコードは、次の名前と値のペアを持つ単一の JSON プロパティバッグです。

|名前  |[値]                              |
|------|-----------------------------------|
|テーブル|テーブルプロパティバッグの配列。|

テーブルプロパティバッグには、次の名前と値のペアがあります。

|名前     |[値]                               |
|---------|------------------------------------|
|TableName|テーブルを識別する文字列。 |
|[列]  |列プロパティバッグの配列。|
|行     |行配列の配列。          |

列プロパティバッグには、次の名前と値のペアがあります。

|名前      |[値]                                                          |
|----------|---------------------------------------------------------------|
|ColumnName|列を識別する文字列。                           |
|DataType  |列の .NET の概数型を提供する文字列。|
|[列の型]|列の[スカラーデータ型](../../query/scalar-data-types/index.md)を提供する文字列。|

行配列は、それぞれの列配列と同じ順序になります。
また、行配列には、関連する列の行の値と一致する要素が1つあります。
やなどの JSON で表現できないスカラーデータ型 `datetime` は、 `timespan` json 文字列として表現されます。

次の例は、1つ `Table_0` `Text` の型の列と1つの行を持つという1つのテーブルが含まれている場合に、このようなオブジェクトの1つを示してい `string` ます。

```json
{
    "Tables": [{
        "TableName": "Table_0",
        "Columns": [{
            "ColumnName": "Text",
            "DataType": "String",
            "ColumnType": "string"
        }],
        "Rows": [["Hello, World!"]]
}
```

別の例: 

:::image type="content" source="../images/rest-json-representation.png" alt-text="rest-json 表現":::

## <a name="the-meaning-of-tables-in-the-response"></a>応答内のテーブルの意味

ほとんどの場合、コントロールコマンドは、コントロールコマンドによって生成された情報を含む1つのテーブルを使用して結果を返します。 たとえば、コマンドは、 `.show databases` クラスター内のすべてのアクセス可能なデータベースの詳細を含む1つのテーブルを返します。

通常、クエリは複数のテーブルを返します。
各テーブル[式ステートメント](../../query/tabularexpressionstatements.md)では、ステートメントによって生成される結果を表す1つ以上のテーブルが順に生成されます。

> [!NOTE]
> [バッチ](../../query/batches.md)と[フォーク演算子](../../query/forkoperator.md)によって、このようなテーブルが複数存在する場合があります。

多くの場合、次の3つのテーブルが生成されます。
* @ExtendedPropertiesクライアントの視覚化の手順などの追加の値を提供するテーブル。 これらの値は、たとえば、 [render 操作](../../query/renderoperator.md)の情報を反映するために生成されます) と[データベースカーソル](../../management/databasecursor.md)です。
  
  このテーブルには `string` 、JSON に似た値を保持する型の列が1つあります。

  |[値]|
  |-----|
  |{"Visualization": "piechart",...}|
  |{"Cursor": "637239957206013576"}|

* クエリ自体の実行に関する追加情報を提供する QueryStatus テーブル (正常に完了した場合)、クエリで使用されたリソースの種類。

  このテーブルの構造は次のとおりです。

  |Timestamp                  |重大度|重大度|StatusCode|StatusDescription            |カウント|RequestId|ActivityId|SubActivityId|ClientActivityId|
  |---------------------------|--------|------------|----------|-----------------------------|-----|---------|----------|-------------|----------------|
  |2020-05-02 06:09: 12.7052077|4       |Info        | 0        | クエリが正常に完了しました|1    |...      |...       |...          |...             |

  重大度値が2以下の場合は、エラーを示します。

* 最後に作成された TableOfContents テーブル。結果内の他のテーブルが一覧表示されます。 

  このテーブルの例を次に示します。

  |Ordinal|種類            |名前               |Id                                  |"この名前"|
  |-------|----------------|-------------------|------------------------------------|----------|
  |0      | QueryResult    |PrimaryResult      |db9520f9-0455-4cb5-b257-53068497605a||
  |1      | QueryProperties|@ExtendedProperties|908901f6-5319-4809-ae9e-009068c267c7||
  |2      | QueryStatus    |QueryStatus        |00000000-0000-0000-0000-000000000000||
